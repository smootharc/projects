#!/bin/sh

help () {

    cat << EOF

Usage: $(basename $0) [H]

Set deepin line power screen black delay to H positive integer hours.

H must be a number between 0 and 555555.

No parameter will show current setting.

EOF

exit

}

getdelay () {

    let seconds=$(gsettings get com.deepin.dde.power line-power-screen-black-delay)

    let hours="$seconds"/3600

    echo "$hours"

    exit
    
}

if [ "$#" -eq 0 ]; then

    getdelay

fi    

if [ "$#" -gt 1 ] || [ "$1" = "-h" ]; then

    help    

fi    

if numfmt -- "$1" > /dev/null 2>&1; then

    hours="$(printf '%0.f' $1)"

    let seconds="$hours"*3600

    if gsettings set com.deepin.dde.power line-power-screen-black-delay "$seconds" &> /dev/null; then

        getdelay

    else

        help
        
    fi

else

    help

fi
