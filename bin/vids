#!/bin/sh

usage () 
{
        echo "Usage: vids OneValidDirectoryName"
        exit 1
}

cleanup ()
{
    test -f "$playlist" && rm "$playlist"
}

if test -d "$1"; then
        dirname=$(realpath "$1")
else
        usage
fi

playlist="$(mktemp)"

trap cleanup EXIT

find "$dirname" -type f -regextype posix-extended -iregex ".*($(extensions video))$" -printf '%C@\0%p\n' | sort -g | cut -d '' -f 2 > "$playlist"

if test -s "$playlist" ; then
    mpv --really-quiet --playlist="$playlist"
else
    echo "No videos found!"
fi
