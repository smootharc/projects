#!/bin/sh

usage () 
{

        echo "Usage: vids OneValidDirectoryName"
        exit 1

}

if test "$#" -gt 1 ; then
        usage
fi

if ! test -d "$1"; then
        usage
else
        dirname=$(realpath "$1")
fi

playlist="$(mktemp)"

find "$dirname" -type f -regextype posix-extended -iregex ".*($(extensions video))$" -printf '%C@\t%p\n' | sort -g | cut -f 2 > "$playlist"

if test -s "$playlist" ; then

    mpv --fs --playlist="$playlist"

else

    echo "No videos found!"

fi

test -f "$playlist" && rm "$playlist"
